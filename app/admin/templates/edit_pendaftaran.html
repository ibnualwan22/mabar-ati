{% extends "_admin_layout.html" %}
{% block title %}Edit Pendaftaran{% endblock %}
{% block content %}
    <h1>Edit Detail Pendaftaran</h1>
    <p>
        <strong>Santri:</strong> {{ pendaftaran.santri.nama }}<br>
        <strong>Rombongan:</strong> {{ pendaftaran.rombongan.nama_rombongan }}
    </p>
    <a href="{{ url_for('admin.daftar_peserta', rombongan_id=pendaftaran.rombongan_id) }}">&larr; Kembali ke Daftar Peserta</a>

    <form method="POST" action="" class="mt-4">
        {{ form.hidden_tag() }}

        <div class="card">
            <div class="card-body">
                <div class="form-group form-grid">
                    {{ form.jenis_perjalanan.label(class="form-label") }}
                    {{ form.jenis_perjalanan(class="form-select") }}
                </div>
                <div class="form-group form-grid">
                    {{ form.titik_turun.label(class="form-label") }}
                    {{ form.titik_turun(class="form-select") }}
                </div>
                <div class="form-group form-grid" id="field-bus-pulang">
                    {{ form.bus_pulang.label(class="form-label") }}
                    {{ form.bus_pulang(class="form-select") }}
                </div>
                <div class="form-group form-grid" id="field-bus-kembali">
                    {{ form.bus_kembali.label(class="form-label") }}
                    {{ form.bus_kembali(class="form-select") }}
                </div>
                <div class="form-group form-grid">
                    {{ form.status_pembayaran.label(class="form-label") }}
                    {{ form.status_pembayaran(class="form-select") }}
                </div>
                <div class="form-group form-grid">
                    {{ form.metode_pembayaran.label(class="form-label") }}
                    {{ form.metode_pembayaran(class="form-select") }}
                </div>
                <div class="form-group mt-4" style="padding-left: 165px;">
                    {{ form.submit(class="btn btn-primary") }}
                </div>
            </div>
        </div>
    </form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const jenisPerjalananSelect = document.getElementById('jenis_perjalanan');
    const fieldBusPulang = document.getElementById('field-bus-pulang');
    const fieldBusKembali = document.getElementById('field-bus-kembali');

    function toggleBusFields() {
        const jenis = jenisPerjalananSelect.value;
        fieldBusPulang.style.display = (jenis === 'Pulang Saja' || jenis === 'Pulang Pergi') ? 'grid' : 'none';
        fieldBusKembali.style.display = (jenis === 'Kembali Saja' || jenis === 'Pulang Pergi') ? 'grid' : 'none';
    }

    jenisPerjalananSelect.addEventListener('change', toggleBusFields);
    // Panggil saat halaman dimuat
    toggleBusFields();
});
</script>
{% endblock %}