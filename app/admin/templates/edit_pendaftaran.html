{% extends "_admin_layout.html" %}
{% block title %}Edit Pendaftaran{% endblock %}
{% block content %}
    <h1>Edit Detail Pendaftaran</h1>
    <p>
        <strong>Santri:</strong> {{ pendaftaran.santri.nama }}<br>
        <strong>Rombongan:</strong> {{ pendaftaran.rombongan.nama_rombongan }}
    </p>
    <a href="{{ url_for('admin.daftar_peserta', rombongan_id=pendaftaran.rombongan_id) }}">&larr; Kembali ke Daftar Peserta</a>

    <form method="POST" action="" class="mt-4">
        {{ form.hidden_tag() }}
        <div class="row g-4">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header fw-bold">Detail Perjalanan Pulang (Meninggalkan Pondok)</div>
                    <div class="card-body">
                        <div class="mb-3">{{ form.status_pulang.label(class="form-label") }} {{ form.status_pulang(class="form-select") }}</div>
                        <div class="mb-3">{{ form.metode_pembayaran_pulang.label(class="form-label") }} {{ form.metode_pembayaran_pulang(class="form-select") }}</div>
                        <div class="mb-3">{{ form.titik_turun.label(class="form-label") }} {{ form.titik_turun(class="form-select") }}</div>
                        <div class="mb-3">{{ form.bus_pulang.label(class="form-label") }} {{ form.bus_pulang(class="form-select") }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header fw-bold">Detail Perjalanan Kembali (Menuju Pondok)</div>
                    <div class="card-body">
                        <div class="mb-3">{{ form.status_kembali.label(class="form-label") }} {{ form.status_kembali(class="form-select") }}</div>
                        <div class="mb-3">{{ form.metode_pembayaran_kembali.label(class="form-label") }} {{ form.metode_pembayaran_kembali(class="form-select") }}</div>
                        <div class="mb-3">{{ form.bus_kembali.label(class="form-label") }} {{ form.bus_kembali(class="form-select") }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group mt-4">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const jenisPerjalananSelect = document.getElementById('jenis_perjalanan');
    const fieldBusPulang = document.getElementById('field-bus-pulang');
    const fieldBusKembali = document.getElementById('field-bus-kembali');

    function toggleBusFields() {
        const jenis = jenisPerjalananSelect.value;
        fieldBusPulang.style.display = (jenis === 'Pulang Saja' || jenis === 'Pulang Pergi') ? 'grid' : 'none';
        fieldBusKembali.style.display = (jenis === 'Kembali Saja' || jenis === 'Pulang Pergi') ? 'grid' : 'none';
    }

    jenisPerjalananSelect.addEventListener('change', toggleBusFields);
    // Panggil saat halaman dimuat
    toggleBusFields();
});
</script>
{% endblock %}